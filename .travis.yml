language: python

python:
  - 2.7
  - 3.4
  - 3.5

env:
  - DJANGOVER=django17
  - DJANGOVER=django18
  - DJANGOVER=django19
  - CLIENT_TESTS=1

matrix:
  exclude:
    - python: 3.5
      env: DJANGOVER=django17
    - python: 2.7
      env: CLIENT_TESTS=1
    - python: 3.4
      env: CLIENT_TESTS=1

install:
  - pip install tox

before_script:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start

script:
  - "if [[ $CLIENT_TESTS == '1' ]]; then export TOX_ENV=client-tests; else export TOX_ENV=py${TRAVIS_PYTHON_VERSION/./}-${DJANGOVER}; fi"
  - tox -r -e "$TOX_ENV"
